{"version":3,"sources":["webpack:///./src/views/Admin/Projects/ProjectList.vue?5dde","webpack:///./src/views/Admin/Projects/ProjectList.vue","webpack:///./src/views/Admin/Projects/ProjectList.vue?e789"],"names":["class","style","to","type","inputs","searchFormData","handleSearch","handleClear","projects","length","id","ref","handleFileUpload","onImportExcels","onExportExcels","loading","project","key","name","src","photo","alt","description","categories","architecture","client","cost","area","link","path","_id","title","onConfirm","reference","onExport","components","ArchitectButton","data","error","file","formSearch","total","created","this","fetchListProjects","computed","inputType","label","attributes","clearable","trim","optionValueField","optionLabelField","optionList","$store","getters","mounted","Promise","all","eventRefresh","fetchCategories","methods","onDelete","page","dispatch","totalCount","res","map","item","value","form","refs","validate","valid","console","log","resetFields","err","$t","alert","window","location","reload","formData","FormData","append","$refs","files","render","__scopeId"],"mappings":"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","file":"js/chunk-09cc4576.d4bc9d62.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ProjectList.vue?vue&type=style&index=0&id=a426c578&scoped=true&lang=css\"","<template>\r\n  <div class=\"content\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <h4 class=\"card-title\">All Projects</h4>\r\n          </div>\r\n          <router-link\r\n            :to=\"{ name: 'ProjectAdd' }\"\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n          >\r\n            Add Project\r\n          </router-link>\r\n\r\n          <card-search-form>\r\n            <search-form\r\n              :inputs=\"searchFormData.inputs\"\r\n              :handleSearch=\"handleSearch\"\r\n              :handleClear=\"handleClear\"\r\n            >\r\n            </search-form>\r\n          </card-search-form>\r\n          <div class=\"related-btn\">\r\n            <b class=\"fix-quantity\">Quantity: {{ projects.length }}</b>\r\n            <label class=\"fix-flex\"\r\n              >Excel File:\r\n              <input\r\n                type=\"file\"\r\n                id=\"file\"\r\n                ref=\"file\"\r\n                v-on:change=\"handleFileUpload()\"\r\n              />\r\n            </label>\r\n            <button type=\"button\" class=\"btn btn-info\" @click=\"onImportExcels\">\r\n              Import Excel\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-success\"\r\n              @click=\"onExportExcels\"\r\n            >\r\n              Export Excel\r\n            </button>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div v-if=\"loading\"><architect-loading></architect-loading></div>\r\n            <div\r\n              class=\"table-responsive\"\r\n              v-else-if=\"projects && projects.length > 0\"\r\n            >\r\n              <table class=\"table table-bordered\">\r\n                <thead class=\" text-primary\">\r\n                  <th class=\"th-name\">\r\n                    Name\r\n                  </th>\r\n                  <th>\r\n                    Image\r\n                  </th>\r\n                  <th>\r\n                    Description\r\n                  </th>\r\n                  <th>\r\n                    Categories\r\n                  </th>\r\n                  <th>\r\n                    Architecture\r\n                  </th>\r\n                  <th>\r\n                    Client\r\n                  </th>\r\n                  <th>\r\n                    Cost\r\n                  </th>\r\n                  <th>\r\n                    Area\r\n                  </th>\r\n\r\n                  <th>\r\n                    Actions\r\n                  </th>\r\n                </thead>\r\n                <tbody v-for=\"project in projects\" :key=\"project.id\">\r\n                  <tr>\r\n                    <td v-if=\"project\">\r\n                      {{ project.name }}\r\n                    </td>\r\n                    <td v-if=\"project\">\r\n                      <img\r\n                        class=\"fix-size-img\"\r\n                        :src=\"project.photo\"\r\n                        alt=\"img\"\r\n                      />\r\n                    </td>\r\n                    <td v-if=\"project\">\r\n                      {{ project.description }}\r\n                    </td>\r\n                    <td v-if=\"project.categories\">\r\n                      {{ project.categories.name }}\r\n                    </td>\r\n                    <td v-else>\r\n                      No category\r\n                    </td>\r\n                    <td>\r\n                      {{ project.architecture }}\r\n                    </td>\r\n                    <td>\r\n                      {{ project.client }}\r\n                    </td>\r\n                    <td>{{ project.cost }} vnd</td>\r\n                    <td>{{ project.area }} m<sup>2</sup></td>\r\n                    <td style=\"width: 80px\">\r\n                      <architect-button\r\n                        link\r\n                        :path=\"'/dashboard/projects/editProject/' + project._id\"\r\n                        class=\"edit-btn\"\r\n                        ><i class=\"far fa-edit\"></i\r\n                      ></architect-button>\r\n                      <el-popconfirm\r\n                        title=\"Are you sure to delete this project?\"\r\n                        @confirm=\"onConfirm(project._id)\"\r\n                      >\r\n                        <template #reference>\r\n                          <i class=\"far fa-trash-alt\"></i>\r\n                        </template>\r\n                      </el-popconfirm>\r\n                      <i\r\n                        class=\"fas fa-file-export\"\r\n                        @click=\"onExport(project._id)\"\r\n                      ></i>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div v-else>There is no projects !</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport ArchitectButton from \"../../../components/common/ArchitectButton.vue\";\r\nexport default {\r\n  components: { ArchitectButton },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      error: null,\r\n      file: \"\",\r\n      formSearch: {},\r\n      total: 0,\r\n      categories: null,\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchListProjects();\r\n  },\r\n  computed: {\r\n    searchFormData: function() {\r\n      return {\r\n        inputs: [\r\n          {\r\n            inputType: \"input\",\r\n            label: \"Name\",\r\n            name: \"name\",\r\n            attributes: { clearable: true },\r\n            trim: true,\r\n          },\r\n          {\r\n            inputType: \"input\",\r\n            label: \"Description\",\r\n            name: \"description\",\r\n            attributes: { clearable: true },\r\n            trim: true,\r\n          },\r\n          {\r\n            inputType: \"select\",\r\n            label: \"Categories\",\r\n            name: \"categoriesName\",\r\n            attributes: { clearable: true },\r\n            trim: true,\r\n            optionValueField: \"value\",\r\n            optionLabelField: \"label\",\r\n            optionList: this.categories,\r\n          },\r\n        ],\r\n      };\r\n    },\r\n    projects() {\r\n      return this.$store.getters[\"projects/getProjects\"];\r\n    },\r\n  },\r\n  async mounted() {\r\n    await Promise.all([this.eventRefresh(), this.fetchCategories()]);\r\n  },\r\n  methods: {\r\n    async onConfirm(id) {\r\n      await this.onDelete(id);\r\n    },\r\n    async eventRefresh(page) {\r\n      this.loading = true;\r\n      await this.$store.dispatch(\"projects/index\", {\r\n        page: page || 1,\r\n        ...this.formSearch,\r\n      });\r\n      this.total = this.projects.totalCount;\r\n      this.loading = false;\r\n    },\r\n    async fetchCategories() {\r\n      const res = await this.$store.dispatch(\"categories/fetchListCategories\");\r\n      this.categories = res.map((item) => ({\r\n        label: item.name,\r\n        value: item.name,\r\n      }));\r\n    },\r\n    async handleSearch(form, refs) {\r\n      this.formSearch = form;\r\n      await this.eventRefresh();\r\n      refs.validate((valid) => {\r\n        console.log(valid);\r\n      });\r\n    },\r\n    async handleClear(form, refs) {\r\n      await this.$store.dispatch(\"projects/index\", { page: 1 });\r\n      refs.resetFields();\r\n      this.total = this.projects.totalCount;\r\n    },\r\n    async onDelete(id) {\r\n      try {\r\n        await this.$store.dispatch(\"projects/onDeleteProject\", id);\r\n      } catch (error) {\r\n        this.err = error;\r\n      }\r\n    },\r\n    async fetchListProjects() {\r\n      this.loading = true;\r\n      try {\r\n        await this.$store.dispatch(\"projects/fetchListProjects\");\r\n      } catch (err) {\r\n        this.error = err;\r\n      }\r\n      this.loading = false;\r\n    },\r\n    async onExport(id) {\r\n      try {\r\n        await this.$store.dispatch(\"projects/getExcelFileById\", id);\r\n      } catch (error) {\r\n        this.err = error || this.$t(\"fail\");\r\n      }\r\n    },\r\n    async onExportExcels() {\r\n      try {\r\n        await this.$store.dispatch(\"projects/getExcelFiles\");\r\n      } catch (error) {\r\n        this.err = error || this.$t(\"fail\");\r\n      }\r\n    },\r\n    async onImportExcels() {\r\n      if (this.file === \"\") {\r\n        alert(\"Please import a excel file\");\r\n        return;\r\n      }\r\n      window.location.reload();\r\n      let formData = new FormData();\r\n      formData.append(\"file\", this.file);\r\n      try {\r\n        await this.$store.dispatch(\"projects/importExcels\", formData);\r\n      } catch (error) {\r\n        this.err = error || this.$t(\"fail\");\r\n      }\r\n    },\r\n    handleFileUpload() {\r\n      this.file = this.$refs.file.files[0];\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.fix-flex {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.fa {\r\n  cursor: pointer;\r\n}\r\n.th-name {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-bottom: none;\r\n}\r\n.flex-edit {\r\n  padding: 12px 7px;\r\n  vertical-align: middle;\r\n  text-align: center;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.fa-undo-alt {\r\n  position: absolute;\r\n  right: 3%;\r\n  top: 4%;\r\n}\r\n\r\n.fa-undo-alt:hover {\r\n  color: #a3cc01;\r\n}\r\n\r\n.fix-size-img {\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n\r\n.fix-position-input {\r\n  width: 40%;\r\n  left: 58%;\r\n  transform: translateY(-35px);\r\n  outline: none;\r\n}\r\n\r\n.fa-trash-alt:hover {\r\n  transform: scale(0.9);\r\n}\r\n\r\n.edit-btn {\r\n  float: left;\r\n}\r\n\r\n.fa:hover,\r\n.fas:hover,\r\n.far:hover {\r\n  transform: scale(0.9);\r\n}\r\n\r\n.fa-file-export {\r\n  color: rgb(39, 131, 198);\r\n  margin-left: 7px;\r\n  cursor: pointer;\r\n}\r\n\r\n.related-btn {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-right: 20px;\r\n}\r\n\r\n.edit-btn:hover {\r\n  transform: scale(0.9);\r\n}\r\n.btn-success:hover {\r\n  border-color: #28a745;\r\n}\r\n.btn-info {\r\n  background-color: #409eff;\r\n}\r\n.btn {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n","import { render } from \"./ProjectList.vue?vue&type=template&id=a426c578&scoped=true\"\nimport script from \"./ProjectList.vue?vue&type=script&lang=js\"\nexport * from \"./ProjectList.vue?vue&type=script&lang=js\"\n\nimport \"./ProjectList.vue?vue&type=style&index=0&id=a426c578&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-a426c578\"\n\nexport default script"],"sourceRoot":""}