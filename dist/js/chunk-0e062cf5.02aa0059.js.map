{"version":3,"sources":["webpack:///./src/views/Admin/Users/UserList.vue?bd9d","webpack:///./src/views/Admin/Users/UserList.vue","webpack:///./src/views/Admin/Users/UserList.vue?97a2"],"names":["class","to","type","inputs","searchFormData","handleSearch","handleClear","users","length","id","ref","handleFileUpload","onImportExcels","onExportExcels","loading","user","key","name","email","address","formatDate","birthday","phone","city","province","role","link","path","_id","title","onConfirm","reference","onExport","data","show","err","file","formSearch","total","cities","created","this","fetchAllUsers","watch","$store","getters","computed","inputType","label","attributes","clearable","trim","filterable","optionValueField","optionLabelField","optionList","mounted","eventRefresh","fetchCities","methods","onDelete","dispatch","res","map","item","province_name","value","page","totalCount","form","refs","validate","valid","console","log","resetFields","onOpen","clearForm","alert","formData","FormData","append","$t","$refs","files","render","__scopeId"],"mappings":"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","file":"js/chunk-0e062cf5.02aa0059.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserList.vue?vue&type=style&index=0&id=04edea4c&scoped=true&lang=css\"","<template>\r\n  <div class=\"content\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-12\">\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <h4 class=\"card-title\">All Users</h4>\r\n          </div>\r\n          <router-link\r\n            :to=\"{ name: 'UserAdd' }\"\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n          >\r\n            Add User\r\n          </router-link>\r\n          <card-search-form>\r\n            <search-form\r\n              :inputs=\"searchFormData.inputs\"\r\n              :handleSearch=\"handleSearch\"\r\n              :handleClear=\"handleClear\"\r\n            >\r\n            </search-form>\r\n          </card-search-form>\r\n          <div class=\"related-btn\">\r\n            <b class=\"fix-quantity\">Quantity: {{ users.length }}</b>\r\n            <label class=\"fix-flex\"\r\n              >Excel File:\r\n              <input\r\n                type=\"file\"\r\n                id=\"file\"\r\n                ref=\"file\"\r\n                v-on:change=\"handleFileUpload()\"\r\n              />\r\n            </label>\r\n            <button type=\"button\" class=\"btn btn-info\" @click=\"onImportExcels\">\r\n              Import Excel\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-success\"\r\n              @click=\"onExportExcels\"\r\n            >\r\n              Export Excel\r\n            </button>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div v-if=\"loading\"><architect-loading></architect-loading></div>\r\n            <div\r\n              class=\"table-responsive\"\r\n              v-else-if=\"!loading && users && users.length > 0\"\r\n            >\r\n              <table class=\"table table-bordered\">\r\n                <thead class=\" text-primary\">\r\n                  <th>\r\n                    Name\r\n                  </th>\r\n                  <th>\r\n                    Email\r\n                  </th>\r\n                  <th>\r\n                    Address\r\n                  </th>\r\n                  <th>\r\n                    Birthday\r\n                  </th>\r\n                  <th>\r\n                    Phone\r\n                  </th>\r\n                  <th>\r\n                    City\r\n                  </th>\r\n                  <th>\r\n                    Province\r\n                  </th>\r\n                  <th>\r\n                    Role\r\n                  </th>\r\n                  <th>\r\n                    Actions\r\n                  </th>\r\n                </thead>\r\n                <tbody v-for=\"user in users\" :key=\"user.id\">\r\n                  <tr>\r\n                    <td>\r\n                      {{ user.name }}\r\n                    </td>\r\n                    <td>\r\n                      {{ user.email }}\r\n                    </td>\r\n                    <td>\r\n                      {{ user.address }}\r\n                    </td>\r\n                    <td>\r\n                      {{ formatDate(user.birthday, \"DD/MM/YYYY HH:mm\") }}\r\n                    </td>\r\n                    <td>\r\n                      {{ user.phone }}\r\n                    </td>\r\n                    <td>\r\n                      {{ user.city }}\r\n                    </td>\r\n                    <td>\r\n                      {{ user.province }}\r\n                    </td>\r\n                    <td>\r\n                      {{ user.role }}\r\n                    </td>\r\n                    <td>\r\n                      <architect-button\r\n                        link\r\n                        :path=\"'/dashboard/users/editUser/' + user._id\"\r\n                        class=\"edit-btn\"\r\n                        ><i class=\"far fa-edit\"></i\r\n                      ></architect-button>\r\n                      <el-popconfirm\r\n                        title=\"Are you sure to delete this user?\"\r\n                        @confirm=\"onConfirm(user._id)\"\r\n                      >\r\n                        <template #reference>\r\n                          <i class=\"far fa-trash-alt\"></i>\r\n                        </template>\r\n                      </el-popconfirm>\r\n                      <i\r\n                        class=\"fas fa-file-export\"\r\n                        @click=\"onExport(user._id)\"\r\n                      ></i>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n            <div v-else>There is no users !</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { formatDate } from \"../../../helpers/common\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      show: false,\r\n      err: null,\r\n      loading: false,\r\n      file: \"\",\r\n      formSearch: {},\r\n      total: 0,\r\n      cities: null,\r\n      formatDate,\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchAllUsers();\r\n  },\r\n  watch: {\r\n    users() {\r\n      return this.$store.getters[\"userAdmin/getUsers\"];\r\n    },\r\n  },\r\n  computed: {\r\n    users() {\r\n      return this.$store.getters[\"userAdmin/getUsers\"];\r\n    },\r\n    searchFormData: function() {\r\n      return {\r\n        inputs: [\r\n          {\r\n            inputType: \"input\",\r\n            label: \"Name\",\r\n            name: \"name\",\r\n            attributes: { clearable: true },\r\n            trim: true,\r\n          },\r\n          {\r\n            inputType: \"input\",\r\n            label: \"Email\",\r\n            name: \"email\",\r\n            attributes: { clearable: true },\r\n            trim: true,\r\n          },\r\n          {\r\n            inputType: \"select\",\r\n            label: \"City\",\r\n            name: \"city\",\r\n            attributes: { clearable: true, filterable: true },\r\n            trim: true,\r\n            optionValueField: \"value\",\r\n            optionLabelField: \"label\",\r\n            optionList: this.cities,\r\n          },\r\n          {\r\n            inputType: \"input\",\r\n            label: \"Address\",\r\n            name: \"address\",\r\n            attributes: { clearable: true },\r\n            trim: true,\r\n          },\r\n          {\r\n            inputType: \"input\",\r\n            label: \"Phone\",\r\n            name: \"phone\",\r\n            attributes: { clearable: true },\r\n            trim: true,\r\n          },\r\n          {},\r\n        ],\r\n      };\r\n    },\r\n  },\r\n  async mounted() {\r\n    await this.eventRefresh();\r\n    await this.fetchCities();\r\n  },\r\n  methods: {\r\n    async onConfirm(id) {\r\n      await this.onDelete(id);\r\n    },\r\n    async fetchCities() {\r\n      const res = await this.$store.dispatch(\"userAdmin/getCities\");\r\n      this.cities = res.map((item) => ({\r\n        label: item.province_name,\r\n        value: item.province_name,\r\n      }));\r\n    },\r\n    async eventRefresh(page) {\r\n      this.loading = true;\r\n      await this.$store.dispatch(\"userAdmin/index\", {\r\n        page: page || 1,\r\n        ...this.formSearch,\r\n      });\r\n      this.total = this.users.totalCount;\r\n      this.loading = false;\r\n    },\r\n    async handleSearch(form, refs) {\r\n      this.formSearch = form;\r\n      await this.eventRefresh();\r\n      refs.validate((valid) => {\r\n        console.log(valid);\r\n      });\r\n    },\r\n    async handleClear(form, refs) {\r\n      await this.$store.dispatch(\"userAdmin/index\", { page: 1 });\r\n      refs.resetFields();\r\n      this.total = this.users.totalCount;\r\n    },\r\n    onOpen() {\r\n      this.show = true;\r\n    },\r\n    clearForm() {\r\n      this.show = false;\r\n    },\r\n    async onDelete(id) {\r\n      try {\r\n        await this.$store.dispatch(\"userAdmin/onDeleteUser\", id);\r\n      } catch (error) {\r\n        this.err = error;\r\n      }\r\n    },\r\n    async fetchAllUsers() {\r\n      this.loading = true;\r\n      try {\r\n        await this.$store.dispatch(\"userAdmin/fetchAllUsers\");\r\n        this.loading = false;\r\n      } catch (error) {\r\n        this.err = error;\r\n        this.loading = false;\r\n      }\r\n    },\r\n    async onExport(id) {\r\n      try {\r\n        await this.$store.dispatch(\"userAdmin/getExcelFileById\", id);\r\n      } catch (error) {\r\n        this.err = error || \"Fail to get\";\r\n      }\r\n    },\r\n    async onExportExcels() {\r\n      try {\r\n        await this.$store.dispatch(\"userAdmin/getExcelFiles\");\r\n      } catch (error) {\r\n        this.err = error || \"Fail to get\";\r\n      }\r\n    },\r\n    async onImportExcels() {\r\n      if (this.file === \"\") {\r\n        alert(\"Please import a excel file\");\r\n        return;\r\n      }\r\n      this.loading = true;\r\n      let formData = new FormData();\r\n      formData.append(\"file\", this.file);\r\n      try {\r\n        await this.$store.dispatch(\"userAdmin/importExcels\", formData);\r\n      } catch (error) {\r\n        this.err = error || this.$t(\"fail\");\r\n      }\r\n      this.loading = false;\r\n    },\r\n    handleFileUpload() {\r\n      this.file = this.$refs.file.files[0];\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.fix-flex {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.btn-success:hover {\r\n  border-color: #28a745;\r\n}\r\n.fa {\r\n  cursor: pointer;\r\n}\r\n\r\n.fix-size-img {\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n\r\n.edit-btn {\r\n  float: left;\r\n}\r\n\r\n.edit-btn:hover {\r\n  transform: scale(0.9);\r\n}\r\n\r\n.fa:hover,\r\n.fas:hover,\r\n.far:hover {\r\n  transform: scale(0.9);\r\n}\r\n\r\n.fa-file-export {\r\n  color: rgb(39, 131, 198);\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n}\r\n\r\n.related-btn {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-right: 20px;\r\n}\r\n\r\n.btn-info {\r\n  background-color: #409eff;\r\n}\r\n.btn {\r\n  font-size: 12px;\r\n}\r\n</style>\r\n","import { render } from \"./UserList.vue?vue&type=template&id=04edea4c&scoped=true\"\nimport script from \"./UserList.vue?vue&type=script&lang=js\"\nexport * from \"./UserList.vue?vue&type=script&lang=js\"\n\nimport \"./UserList.vue?vue&type=style&index=0&id=04edea4c&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-04edea4c\"\n\nexport default script"],"sourceRoot":""}